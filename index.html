<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ikapitong Lente</title>

<style>
    body {
        margin: 0;
        background: black;
        overflow-x: hidden;
        height: 100vh;
    }

    .carousel-wrapper {
        width: 100%;
        overflow-x: scroll;
        overflow-y: hidden;
        white-space: nowrap;
        scroll-behavior: smooth;
        position: relative;
    }

    /* Hide scrollbar */
    .carousel-wrapper::-webkit-scrollbar {
        display: none;
    }
    .carousel-wrapper {
        -ms-overflow-style: none;
        scrollbar-width: none;
        position: fixed;
        left: 0; bottom: 0; width: 100vw;
    }

    .carousel-track {
        display: inline-flex;
        align-items: flex-end; /* BOTTOM ALIGN */
        gap: 0;
        padding: 0;
        vertical-align: bottom;
    }

    .carousel-track img {
        height: auto;
        max-width: 40rem;
        max-height: 85vh;
        object-fit: contain;
        display: block;
        user-select: none;
        pointer-events: none;
        align-self: flex-end; /* optional, ensures each image bottoms inside the track */
}
</style>
</head>

<body>

<div class="carousel-wrapper" id="carousel">
    <div class="carousel-track" id="track">
        <!-- Add as many images as you want -->
        <img src="img1.jpg">
        <img src="img2.jpg">
        <img src="img3.jpg">
        <img src="img4.jpg">
        <img src="img5.jpg">
        <!-- JS will duplicate them -->
    </div>
</div>

<script>
    const carousel = document.getElementById("carousel");
    const track = document.getElementById("track");

    // --- Seamless Infinite Scroll ---
    function seamlessDuplicateImages(repeat = 5) {
    const originalImgs = Array.from(track.children);

    for (let i = 0; i < repeat; i++) {
        // --- Clone before (normal order) ---
        const before = track.cloneNode(false); // empty container
        before.removeAttribute('id');
        originalImgs.forEach(img => before.appendChild(img.cloneNode(true)));
        carousel.insertBefore(before, track);

        // --- Clone after (normal order) ---
        const after = track.cloneNode(false);
        after.removeAttribute('id');
        originalImgs.forEach(img => after.appendChild(img.cloneNode(true)));
        carousel.appendChild(after);
    }
}

seamlessDuplicateImages(5); // 5 sets of before/after clones


    // 2. Set initial scroll position to the start of the original set
    carousel.scrollLeft = track.offsetLeft;

    // Autoscroll speed
    let scrollSpeed = 2; // lower = slower
    let isAutoScrolling = true;
    let autoScrollPauseTimeout;
    let autoScrollResumeTimeout;

    function pauseAutoScroll() {
        isAutoScrolling = false;
    }

    // 3. Update autoScroll and drag logic for seamless looping
    function autoScroll() {
        if (isAutoScrolling) {
            carousel.scrollLeft += scrollSpeed;
            // If we've scrolled past the end of the original set, reset to the start
            if (carousel.scrollLeft >= track.offsetLeft + track.scrollWidth) {
                carousel.scrollLeft = track.offsetLeft;
            }
            requestAnimationFrame(autoScroll);
        }
    }

    autoScroll();

    // Enable horizontal scrolling with mouse wheel
    carousel.addEventListener('wheel', function(e) {
        if (e.deltaY !== 0) {
            e.preventDefault();
            // Invert direction: scroll up (deltaY < 0) moves right, scroll down (deltaY > 0) moves left
            // Increase sensitivity by multiplying deltaY
            carousel.scrollLeft -= e.deltaY * 1.5; // 2.5 = higher sensitivity, adjust as needed
        }
    }, { passive: false });

    // Remove previous click-to-toggle logic
    // Add single click to pause, double click to resume
    let clickTimeout = null;

    document.addEventListener('click', (e) => {
        // Prevent double click from firing two single clicks
        if (clickTimeout) return;
        clickTimeout = setTimeout(() => {
            isAutoScrolling = false;
            clickTimeout = null;
        }, 250); // Wait to see if a double click happens
    });

    document.addEventListener('dblclick', (e) => {
        clearTimeout(clickTimeout);
        clickTimeout = null;
        if (!isAutoScrolling) {
            isAutoScrolling = true;
            autoScroll();
        }
    });

    // 4. Update drag and touch logic to reset position if user scrolls too far
    function checkSeamlessLoop() {
        if (carousel.scrollLeft < track.offsetLeft) {
            carousel.scrollLeft = track.offsetLeft + track.scrollWidth - 1;
        } else if (carousel.scrollLeft >= track.offsetLeft + track.scrollWidth) {
            carousel.scrollLeft = track.offsetLeft;
        }
    }

    // Optional: Add touch support for mobile devices
    let touchStartX = 0;
    let touchScrollLeft = 0;
    carousel.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].pageX;
        touchScrollLeft = carousel.scrollLeft;
    });
    carousel.addEventListener('touchmove', (e) => {
        const x = e.touches[0].pageX;
        const walk = (x - touchStartX) * 5;
        carousel.scrollLeft = touchScrollLeft - walk;
        checkSeamlessLoop();
    });

    // Pause auto-scroll on user interaction (scroll, drag, swipe), then resume after 0.1s
    ['mousedown', 'touchstart', 'wheel'].forEach(event => {
        carousel.addEventListener(event, () => {
            isAutoScrolling = false;
            resumeAutoScrollSoon();
        });
    });

    // Improved click-and-drag (swipe) scrolling with mouse
    let isDragging = false;
    let startX = 0;
    let scrollLeft = 0;

    carousel.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX;
        scrollLeft = carousel.scrollLeft;
        document.body.style.userSelect = 'none';
        carousel.classList.add('dragging');
    });
    document.addEventListener('mouseup', () => {
        isDragging = false;
        document.body.style.userSelect = '';
        carousel.classList.remove('dragging');
    });
    document.addEventListener('mouseleave', () => {
        isDragging = false;
        document.body.style.userSelect = '';
        carousel.classList.remove('dragging');
    });
    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        e.preventDefault();
        const x = e.clientX;
        const walk = (x - startX) * 0.8; // 0.8 multiplier for medium sensitivity
        carousel.scrollLeft = scrollLeft - walk;
        // Only call checkSeamlessLoop if not at the very start or end
        if (carousel.scrollLeft > track.offsetLeft && carousel.scrollLeft < track.offsetLeft + track.scrollWidth) {
            checkSeamlessLoop();
        }
    });
</script>

</body>
</html>
